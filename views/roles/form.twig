{% extends "layout.twig" %}
{% block title %}{{ role ? 'Editar papel' : 'Novo papel' }}{% endblock %}
{% block page_title %}{{ role ? 'Editar papel' : 'Novo papel' }}{% endblock %}
{% block breadcrumb %}
<li class="breadcrumb-item"><a href="/dashboard">Painel</a></li>
<li class="breadcrumb-item"><a href="/roles">Papéis</a></li>
<li class="breadcrumb-item active" aria-current="page">{{ role ? 'Editar' : 'Novo papel' }}</li>
{% endblock %}
{% block content %}
<form method="post" action="{{ role ? '/roles/' ~ role.id : '/roles' }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    <div class="form-group">
        <label for="name">Nome</label>
        <input type="text" class="form-control {{ errors.name is defined ? 'is-invalid' : '' }}" id="name" name="name" value="{{ role.name|default('') }}" required>
        {% if errors.name is defined %}<div class="invalid-feedback">{{ errors.name }}</div>{% endif %}
    </div>
    <div class="form-group">
        <label for="slug">Slug</label>
        <input type="text" class="form-control {{ errors.slug is defined ? 'is-invalid' : '' }}" id="slug" name="slug" value="{{ role.slug|default('') }}" placeholder="ex: editor" required>
        {% if errors.slug is defined %}<div class="invalid-feedback">{{ errors.slug }}</div>{% endif %}
    </div>
    <div class="form-group">
        <label>Permissões</label>
        {% for perm in permissions %}
        <div class="form-check">
            <input class="form-check-input" type="checkbox" name="permission_ids[]" value="{{ perm.id }}" id="perm_{{ perm.id }}"
                {{ (role.permission_ids is defined and perm.id in role.permission_ids) ? 'checked' : '' }}>
            <label class="form-check-label" for="perm_{{ perm.id }}">{{ perm.name }} <code>{{ perm.slug }}</code></label>
        </div>
        {% endfor %}
    </div>
    <button type="submit" class="btn btn-primary">Salvar</button>
    <a href="/roles" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}
